!function(N){"use strict";var e={i18n:{ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So.","Mo","Di","Mi","Do","Fr","Sa."]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]}},value:"",lang:"en",format:"Y-m-d H:i",formatTime:"H:i",formatDate:"Y-m-d",step:60,closeOnDateSelect:0,closeOnWithoutClick:!0,timepicker:!0,datepicker:!0,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,mask:!1,validateOnBlur:!0,allowBlank:!1,yearStart:1950,yearEnd:2050,style:"",id:"",roundTime:"round",className:"",weekends:[]};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,a=this.length;n<a;n++)if(this[n]===e)return n;return-1}),N.fn.xdsoftScroller=function(e){return this.each(function(){var a,r,s,o,i,d,c,u,l,f=N(this);N(this).hasClass("xdsoft_scroller_box")||(a=function(e){var t,n={x:0,y:0};return"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.x=t.pageX,n.y=t.pageY):"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(n.x=e.pageX,n.y=e.pageY),n},r=0,s=f.children().eq(0),o=f[0].offsetHeight-2,i=s[0].offsetHeight,d=N('<div class="xdsoft_scrollbar"></div>'),c=N('<div class="xdsoft_scroller"></div>'),l=!(u=100),d.append(c),f.addClass("xdsoft_scroller_box").append(d),c.on("mousedown.xdsoft_scroller",function(e){var t=e.pageY,n=parseInt(c.css("margin-top")),a=d[0].offsetHeight;N(document.body).addClass("xdsoft_noselect"),N([document.body,window]).on("mouseup.xdsoft_scroller",function e(){N([document.body,window]).off("mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",r).removeClass("xdsoft_noselect")}),N(document.body).on("mousemove.xdsoft_scroller",r=function(e){e=e.pageY-t+n;e<0&&(e=0),e+c[0].offsetHeight>a&&(e=a-c[0].offsetHeight),f.trigger("scroll_element.xdsoft_scroller",[u?e/u:0])})}),f.on("scroll_element.xdsoft_scroller",function(e,t){t=1<t?1:t<0||isNaN(t)?0:t,c.css("margin-top",u*t),s.css("marginTop",-parseInt((i-o)*t))}).on("resize_scroll.xdsoft_scroller",function(e,t){o=f[0].offsetHeight-2,i=s[0].offsetHeight;var n=o/i,a=n*d[0].offsetHeight;1<n?c.hide():(c.show(),c.css("height",parseInt(10<a?a:10)),u=d[0].offsetHeight-c[0].offsetHeight,f.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(s.css("marginTop")))/(i-o)]))}),f.mousewheel&&f.mousewheel(function(e,t,n,a){var r=Math.abs(parseInt(s.css("marginTop")));return f.trigger("scroll_element.xdsoft_scroller",[(r-20*t)/(i-o)]),e.stopPropagation(),!1}),f.on("touchstart",function(e){l=a(e)}),f.on("touchmove",function(e){var t,n;l&&(t=a(e),n=Math.abs(parseInt(s.css("marginTop"))),f.trigger("scroll_element.xdsoft_scroller",[(n-(t.y-l.y))/(i-o)]),e.stopPropagation(),e.preventDefault())}),f.on("touchend touchcancel",function(e){l=!1})),f.trigger("resize_scroll.xdsoft_scroller",[e])})},N.fn.datetimepicker=function(a){function r(o){var g=N("<div "+(P.id?'id="'+P.id+'"':"")+" "+(P.style?'style="'+P.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+P.className+'"></div>'),e=N('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),r=N('<div class="xdsoft_datepicker active"></div>'),p=N('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),x=N('<div class="xdsoft_calendar"></div>'),n=N('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),c=n.find(".xdsoft_time_box").eq(0),v=N('<div class="xdsoft_time_variant"></div>'),a=N('<div class="xdsoft_scrollbar"></div>'),D=(N('<div class="xdsoft_scroller"></div>'),N('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>')),y=N('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');p.find(".xdsoft_month span").after(D),p.find(".xdsoft_year span").after(y),p.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(e){p.find(".xdsoft_select").hide();var t=N(this).find(".xdsoft_select").eq(0),n=0,a=0;w.currentTime&&(n=w.currentTime[N(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),t.show();for(var r=t.find("div.xdsoft_option"),s=0;s<r.length&&r.eq(s).data("value")!=n;s++)a+=r[0].offsetHeight;return t.xdsoftScroller(a/(t.children()[0].offsetHeight-(t[0].offsetHeight-2))),e.stopPropagation(),!1}),p.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(e){w&&w.currentTime&&w.currentTime[N(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](N(this).data("value")),N(this).parent().parent().hide(),g.trigger("xchange.xdsoft")}),g.setOptions=function(e){!(P=N.extend({},P,e)).open&&!P.opened||P.inline||o.trigger("open.xdsoft"),P.inline&&(g.addClass("xdsoft_inline"),o.after(g).hide(),g.trigger("afterOpen.xdsoft")),P.inverseButton&&(P.next="xdsoft_prev",P.prev="xdsoft_next"),!P.datepicker&&P.timepicker&&r.removeClass("active"),P.datepicker&&!P.timepicker&&n.removeClass("active"),P.value&&o&&o.val&&o.val(P.value),isNaN(P.dayOfWeekStart)||parseInt(P.dayOfWeekStart)<0||6<parseInt(P.dayOfWeekStart)?P.dayOfWeekStart=0:P.dayOfWeekStart=parseInt(P.dayOfWeekStart),P.timepickerScrollbar||a.hide();var t,e=[];if(P.minDate&&(e=/^-(.*)$/.exec(P.minDate))&&(e=Date.parseDate(e[1],P.formatDate))&&(t=e.getTime()+-1*e.getTimezoneOffset()*6e4,P.minDate=new Date((new Date).getTime()-t).dateFormat(P.formatDate)),P.maxDate&&(e=/^\+(.*)$/.exec(P.maxDate))&&(e=Date.parseDate(e[1],P.formatDate))&&(t=e.getTime()+-1*e.getTimezoneOffset()*6e4,P.maxDate=new Date((new Date).getTime()+t).dateFormat(P.formatDate)),p.find(".xdsoft_today_button").css("visibility",P.todayButton?"visible":"hidden"),P.mask){var s=function(e,t){e=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(e).test(t)};switch(o.off("keydown.xdsoft"),!0){case!0===P.mask:P.mask=P.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case"string"==N.type(P.mask):s(P.mask,o.val())||o.val(P.mask.replace(/[0-9]/g,"_")),o.on("keydown.xdsoft",function(e){var t=this.value,n=e.which;switch(!0){case 48<=n&&n<=57||96<=n&&n<=105||8==n||n==f:var a=function(e){try{if(document.selection&&document.selection.createRange)return document.selection.createRange().getBookmark().charCodeAt(2)-2;if(e.setSelectionRange)return e.selectionStart}catch(e){return 0}}(this),r=8!=n&&n!=f?String.fromCharCode(96<=n&&n<=105?n-48:n):"_";for(8!=n&&n!=f||!a||(a--,r="_");/[^0-9_]/.test(P.mask.substr(a,1))&&a<P.mask.length&&0<a;)a+=8==n||n==f?-1:1;if(t=t.substr(0,a)+r+t.substr(a+1),""==N.trim(t))t=P.mask.replace(/[0-9]/g,"_");else if(a==P.mask.length)break;for(a+=8==n||n==f?0:1;/[^0-9_]/.test(P.mask.substr(a,1))&&a<P.mask.length&&0<a;)a+=8==n||n==f?-1:1;s(P.mask,t)?(this.value=t,function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e){if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd(t),n.moveStart(t),n.select()}e.setSelectionRange&&e.setSelectionRange(t,t)}}(this,a)):""==N.trim(t)?this.value=P.mask.replace(/[0-9]/g,"_"):o.trigger("error_input.xdsoft");break;case!!~[O,F,I,H,Y].indexOf(n)&&C:case!!~[h,_,M,T,b,S,l,k,m].indexOf(n):return!0}return e.preventDefault(),!1})}}P.validateOnBlur&&o.off("blur.xdsoft").on("blur.xdsoft",function(){return!(!P.allowBlank||N.trim(N(this).val()).length)||void(Date.parseDate(N(this).val(),P.format)||N(this).val((new Date).dateFormat(P.format)))}),P.dayOfWeekStartPrev=0==P.dayOfWeekStart?6:P.dayOfWeekStart-1,g.trigger("xchange.xdsoft")},g.data("options",P).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),y.hide(),D.hide(),!1});var t=n.find(".xdsoft_time_box");t.append(v),t.xdsoftScroller(),g.on("afterOpen.xdsoft",function(){t.xdsoftScroller()}),g.append(r).append(n),!0!==P.withoutCopyright&&g.append(e),r.append(p).append(x),N("body").append(g);var w=new function(){var t=this;t.now=function(){return new Date},t.currentTime=this.now(),t.isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strtodatetime(e):t.isValidDate(e)?e:t.now(),g.trigger("xchange.xdsoft")},t.getCurrentTime=function(e){return t.currentTime},t.nextMonth=function(){var e=t.currentTime.getMonth()+1;return 12==e&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),e=0),t.currentTime.setMonth(e),P.onChangeMonth&&P.onChangeMonth.call&&P.onChangeMonth.call(g,w.currentTime,g.data("input")),g.trigger("xchange.xdsoft"),e},t.prevMonth=function(){var e=t.currentTime.getMonth()-1;return-1==e&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),e=11),t.currentTime.setMonth(e),P.onChangeMonth&&P.onChangeMonth.call&&P.onChangeMonth.call(g,w.currentTime,g.data("input")),g.trigger("xchange.xdsoft"),e},t.strtodatetime=function(e){e=e?Date.parseDate(e,P.format):new Date;return t.isValidDate(e)||(e=new Date),e},t.strtodate=function(e){e=e?Date.parseDate(e,P.formatDate):new Date;return t.isValidDate(e)||(e=new Date),e},t.strtotime=function(e){e=e?Date.parseDate(e,P.formatTime):new Date;return t.isValidDate(e)||(e=new Date),e},t.str=function(){return t.currentTime.dateFormat(P.format)}};p.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){g.data("changed",!0),w.setCurrentTime(new Date),g.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){o.val(w.str()),g.trigger("close.xdsoft")}),p.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var n=N(this),a=0,r=!1;!function e(t){w.currentTime.getMonth();n.hasClass(P.next)?w.nextMonth():n.hasClass(P.prev)&&w.prevMonth(),r||(a=setTimeout(e,t||100))}(500),N([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(a),r=!0,N([document.body,window]).off("mouseup.xdsoft",e)})}),n.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var s=N(this),o=0,i=!1,d=110;!function e(t){var n=c[0].offsetHeight-2,a=v[0].offsetHeight,r=Math.abs(parseInt(v.css("marginTop")));s.hasClass(P.next)&&a-n-P.timeHeightInTimePicker>=r?v.css("marginTop","-"+(r+P.timeHeightInTimePicker)+"px"):s.hasClass(P.prev)&&0<=r-P.timeHeightInTimePicker&&v.css("marginTop","-"+(r-P.timeHeightInTimePicker)+"px"),c.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(v.css("marginTop"))/(a-n))]),d=10<d?10:d-10,i||(o=setTimeout(e,t||d))}(500),N([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(o),i=!0,N([document.body,window]).off("mouseup.xdsoft",e)})}),g.on("xchange.xdsoft",function(e){for(var t="",n=new Date(w.currentTime.getFullYear(),w.currentTime.getMonth(),1),a=0,r=new Date;n.getDay()!=P.dayOfWeekStart;)n.setDate(n.getDate()-1);t+="<table><thead><tr>";for(var s=0;s<7;s++)t+="<th>"+P.i18n[P.lang].dayOfWeek[6<s+P.dayOfWeekStart?0:s+P.dayOfWeekStart]+"</th>";t+="</tr></thead>",t+="<tbody><tr>";var o=!1,i=!1;!1!==P.maxDate&&(o=w.strtodate(P.maxDate),o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),23,59,59,999)),!1!==P.minDate&&(i=w.strtodate(P.minDate),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()));for(var d,c,u=[];a<w.currentTime.getDaysInMonth()||n.getDay()!=P.dayOfWeekStart||w.currentTime.getMonth()==n.getMonth();)u=[],a++,d=n.getDate(),c=n.getFullYear(),m=n.getMonth(),u.push("xdsoft_date"),(!1!==o&&o<n||!1!==i&&n<i)&&u.push("xdsoft_disabled"),w.currentTime.getMonth()!=m&&u.push("xdsoft_other_month"),(P.defaultSelect||g.data("changed"))&&w.currentTime.dateFormat("d.m.Y")==n.dateFormat("d.m.Y")&&u.push("xdsoft_current"),r.dateFormat("d.m.Y")==n.dateFormat("d.m.Y")&&u.push("xdsoft_today"),0!=n.getDay()&&6!=n.getDay()&&!~P.weekends.indexOf(n.dateFormat("d.m.Y"))||u.push("xdsoft_weekend"),t+='<td data-date="'+d+'" data-month="'+m+'" data-year="'+c+'" class="xdsoft_date '+u.join(" ")+'"><div>'+d+"</div></td>",n.getDay()==P.dayOfWeekStartPrev&&(t+="</tr>"),n.setDate(d+1);t+="</tbody></table>",x.html(t),p.find(".xdsoft_label span").eq(0).text(P.i18n[P.lang].months[w.currentTime.getMonth()]),p.find(".xdsoft_label span").eq(1).text(w.currentTime.getFullYear());function l(e,t){var n=new Date;n.setHours(e),e=parseInt(n.getHours()),n.setMinutes(t),t=parseInt(n.getMinutes()),(!(u=[])!==P.maxTime&&w.strtotime(P.maxTime).getTime()<n.getTime()||!1!==P.minTime&&w.strtotime(P.minTime).getTime()>n.getTime())&&u.push("xdsoft_disabled"),(P.defaultSelect||g.data("changed"))&&parseInt(w.currentTime.getHours())==parseInt(e)&&(59<P.step||Math[P.roundTime](w.currentTime.getMinutes()/P.step)*P.step==parseInt(t))&&u.push("xdsoft_current"),parseInt(r.getHours())==parseInt(e)&&parseInt(r.getMinutes())==parseInt(t)&&u.push("xdsoft_today"),f+='<div class="xdsoft_time '+u.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+n.dateFormat(P.formatTime)+"</div>"}var f="",m="";if(P.allowTimes&&N.isArray(P.allowTimes)&&P.allowTimes.length)for(a=0;a<P.allowTimes.length;a++)l(w.strtotime(P.allowTimes[a]).getHours(),m=w.strtotime(P.allowTimes[a]).getMinutes());else for(var a=0,s=0;a<(P.hours12?12:24);a++)for(s=0;s<60;s+=P.step)l((a<10?"0":"")+a,m=(s<10?"0":"")+s);v.html(f);var h="",a=0;for(a=parseInt(P.yearStart,10);a<=parseInt(P.yearEnd,10);a++)h+='<div class="xdsoft_option '+(w.currentTime.getFullYear()==a?"xdsoft_current":"")+'" data-value="'+a+'">'+a+"</div>";for(y.children().eq(0).html(h),a=0,h="";a<=11;a++)h+='<div class="xdsoft_option '+(w.currentTime.getMonth()==a?"xdsoft_current":"")+'" data-value="'+a+'">'+P.i18n[P.lang].months[a]+"</div>";D.children().eq(0).html(h),N(this).trigger("generate.xdsoft"),e.stopPropagation()}).on("afterOpen.xdsoft",function(){var e,t,n;P.timepicker&&v.find(".xdsoft_current").length&&(e=c[0].offsetHeight-2,(t=v[0].offsetHeight)-e<(n=v.find(".xdsoft_current").index()*P.timeHeightInTimePicker+1)&&(n=t-e),v.css("marginTop","-"+parseInt(n)+"px"),c.trigger("scroll_element.xdsoft_scroller",[parseInt(n)/(t-e)]))});var s=0;x.on("click.xdsoft","td",function(){s++;var e=N(this),t=w.currentTime;if(e.hasClass("xdsoft_disabled"))return!1;t.setFullYear(e.data("year")),t.setMonth(e.data("month")),t.setDate(e.data("date")),g.trigger("select.xdsoft",[t]),o.val(w.str()),(1<s||!0===P.closeOnDateSelect||0===P.closeOnDateSelect&&!P.timepicker)&&!P.inline&&g.trigger("close.xdsoft"),P.onSelectDate&&P.onSelectDate.call&&P.onSelectDate.call(g,w.currentTime,g.data("input")),g.data("changed",!0),g.trigger("xchange.xdsoft"),g.trigger("changedatetime.xdsoft"),setTimeout(function(){s=0},200)}),v.on("click.xdsoft","div",function(){var e=N(this),t=w.currentTime;if(e.hasClass("xdsoft_disabled"))return!1;t.setHours(e.data("hour")),t.setMinutes(e.data("minute")),g.trigger("select.xdsoft",[t]),g.data("input").val(w.str()),P.inline||g.trigger("close.xdsoft"),P.onSelectTime&&P.onSelectTime.call&&P.onSelectTime.call(g,w.currentTime,g.data("input")),g.data("changed",!0),g.trigger("xchange.xdsoft"),g.trigger("changedatetime.xdsoft")}),g.mousewheel&&r.mousewheel(function(e,t,n,a){return!P.scrollMonth||(t<0?w.nextMonth():w.prevMonth(),!1)}),g.mousewheel&&c.unmousewheel().mousewheel(function(e,t,n,a){if(!P.scrollTime)return!0;var r=c[0].offsetHeight-2,s=v[0].offsetHeight,o=Math.abs(parseInt(v.css("marginTop"))),i=!0;return t<0&&s-r-P.timeHeightInTimePicker>=o?(v.css("marginTop","-"+(o+P.timeHeightInTimePicker)+"px"),i=!1):0<t&&0<=o-P.timeHeightInTimePicker&&(v.css("marginTop","-"+(o-P.timeHeightInTimePicker)+"px"),i=!1),c.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(v.css("marginTop"))/(s-r))]),e.stopPropagation(),i}),g.on("changedatetime.xdsoft",function(){P.onChangeDateTime&&P.onChangeDateTime.call&&P.onChangeDateTime.call(g,w.currentTime,g.data("input"))}).on("generate.xdsoft",function(){P.onGenerate&&P.onGenerate.call&&P.onGenerate.call(g,w.currentTime,g.data("input"))});var i=0;function d(){var e=g.data("input").offset(),t=e.top+g.data("input")[0].offsetHeight-1,n=e.left;t+g[0].offsetHeight>N("body").height()&&(t=e.top-g[0].offsetHeight+1),n+g[0].offsetWidth>N("body").width()&&(n=e.left-g[0].offsetWidth+g.data("input")[0].offsetWidth),g.css({left:n,top:t})}o.mousewheel&&o.mousewheel(function(e,t,n,a){return!P.scrollInput||(!P.datepicker&&P.timepicker?(0<=(i=v.find(".xdsoft_current").length?v.find(".xdsoft_current").eq(0).index():0)+t&&i+t<v.children().length&&(i+=t),v.children().eq(i).length&&v.children().eq(i).trigger("mousedown"),!1):P.datepicker&&!P.timepicker?(r.trigger(e,[t,n,a]),o.val&&o.val(w.str()),g.trigger("changedatetime.xdsoft"),!1):void 0)}),g.on("open.xdsoft",function(){var e=!0;P.onShow&&P.onShow.call&&(e=P.onShow.call(g,w.currentTime,g.data("input"))),!1!==e&&(g.show(),g.trigger("afterOpen.xdsoft"),d(),N(window).off("resize.xdsoft",d).on("resize.xdsoft",d),P.closeOnWithoutClick&&N([document.body,window]).on("mousedown.xdsoft",function e(){g.trigger("close.xdsoft"),N([document.body,window]).off("mousedown.xdsoft",e)}))}).on("close.xdsoft",function(e){var t=!0;P.onClose&&P.onClose.call&&(t=P.onClose.call(g,w.currentTime,g.data("input"))),!1===t||P.opened||P.inline||g.hide(),e.stopPropagation()}).data("input",o);var u=0;g.data("xdsoft_datetime",w),g.setOptions(P),(e=P.value||(o&&o.val&&o.val()?o.val():""))&&w.isValidDate(e=Date.parseDate(e,P.format))?g.data("changed",!0):e="",w.setCurrentTime(e||new Date),g.trigger("afterOpen.xdsoft"),o.data("xdsoft_datetimepicker",g).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){o.is(":disabled")||o.is(":hidden")||!o.is(":visible")||(clearTimeout(u),u=setTimeout(function(){o.is(":disabled")||o.is(":hidden")||!o.is(":visible")||(w.setCurrentTime(o&&o.val&&o.val()?o.val():new Date),g.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(e){this.value;e=e.which;switch(!0){case!!~[m].indexOf(e):var t=N("input:visible,textarea:visible");return g.trigger("close.xdsoft"),t.eq(t.index(this)+1).focus(),!1;case!!~[k].indexOf(e):return g.trigger("close.xdsoft"),!0}})}var l=17,f=46,m=13,h=27,T=37,_=38,b=39,M=40,k=9,S=116,O=65,F=67,I=86,H=90,Y=89,C=!1,P=N.isPlainObject(a)||!a?N.extend({},e,a):N.extend({},e);return N(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode==l&&(C=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode==l&&(C=!1)}),this.each(function(){var e,t,n;if(e=N(this).data("xdsoft_datetimepicker")){if("string"===N.type(a))switch(a){case"show":N(this).select().focus(),e.trigger("open.xdsoft");break;case"hide":e.trigger("close.xdsoft");break;case"destroy":t=N(this),(n=t.data("xdsoft_datetimepicker"))&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),N(window).off("resize.xdsoft"),N([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel());break;case"reset":this.value=this.defaultValue,this.value&&e.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,P.format))||e.data("changed",!1),e.data("xdsoft_datetime").setCurrentTime(this.value)}else e.setOptions(P);return 0}"string"!==N.type(a)&&r(N(this))})}}(jQuery),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){return null==Date.formatFunctions[e]&&Date.createNewFormat(e),this[Date.formatFunctions[e]]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){null==Date.parseFunctions[t]&&Date.createParser(t);t=Date.parseFunctions[t];return Date[t](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(0<this.getTimezoneOffset()?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()-1},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=7-new Date(this.getFullYear(),0,1).getDay()+4;return document.write(t),String.leftPad((e-t)/7+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?7+e:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?7+e:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var a=new String(e);for(null==n&&(n=" ");a.length<t;)a=n+a;return a},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(d){var c,u,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(d.event.fixHooks)for(var n=e.length;n;)d.event.fixHooks[e[--n]]=d.event.mouseHooks;function a(e){var t,n,a=e||window.event,r=[].slice.call(arguments,1),s=0,o=0,i=0;return(e=d.event.fix(a)).type="mousewheel",a.wheelDelta&&(s=a.wheelDelta),a.detail&&(s=-1*a.detail),a.deltaY&&(s=i=-1*a.deltaY),a.deltaX&&(s=-1*(o=a.deltaX)),void 0!==a.wheelDeltaY&&(i=a.wheelDeltaY),void 0!==a.wheelDeltaX&&(o=-1*a.wheelDeltaX),t=Math.abs(s),(!c||t<c)&&(c=t),n=Math.max(Math.abs(i),Math.abs(o)),(!u||n<u)&&(u=n),n=0<s?"floor":"ceil",s=Math[n](s/c),o=Math[n](o/u),i=Math[n](i/u),r.unshift(e,s,o,i),(d.event.dispatch||d.event.handle).apply(this,r)}d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],a,!1);else this.onmousewheel=null}},d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});